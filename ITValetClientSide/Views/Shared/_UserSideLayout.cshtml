@using ITValetFrontEnd.HelperClasses;
@using System.Security.Claims;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Gurdeep singh osahan">
    <meta name="author" content="Gurdeep singh osahan">
    <title>IT Valet - @ViewData["Title"]</title>
    <!-- Favicon Icon -->
    <link rel="icon" type="image/png" href="~/Images/favicon.ico">
    <!-- Bootstrap core CSS -->
    <link href="~/frontAssets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome-->
    <link href="~/frontAssets/vendor/fontawesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- Material Design Icons -->
    <link href="~/frontAssets/vendor/icons/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css">
    <!-- Slick -->
    <link href="~/frontAssets/vendor/slick-master/slick/slick.css" rel="stylesheet" type="text/css">
    <!-- Lightgallery -->
    <link href="~/frontAssets/vendor/lightgallery-master/dist/css/lightgallery.min.css" rel="stylesheet">
    <!-- Select2 CSS -->
    <link href="~/frontAssets/vendor/select2/css/select2-bootstrap.css" />
    <link href="~/frontAssets/vendor/select2/css/select2.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="~/frontAssets/css/style.css" rel="stylesheet">
    <link href="~/frontAssets/css/tagsinput.css" rel="stylesheet">
    <link href="../sweetalert/wnoty.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/v/dt/dt-1.13.4/datatables.min.css" rel="stylesheet" />

    @RenderSection("CustomCss", false)

    <style>
        @@media only screen and (max-width: 768px) {
            .header-block {
                display: none;
            }
        }

        @@media only screen and (min-width: 992px) {
            .header-block-desktop {
                display: none;
            }
        }

        @@media only screen and (min-width: 768px) {
            .header-block-tab {
                display: none;
            }
        }

        @@media (min-width: 0px) and (max-width: 767px) {
            .osahan-nav-mid .navbar-collapse {
                position: absolute;
                background: #fff;
                height: 286px;
                top: 55px;
                right: 0px;
                left: 0px;
                padding: 15px;
                border-top: 1px solid #eaebec;
                border-bottom: 3px solid #3f424452;
                z-index: 9;
            }
        }

        @@media only screen and (max-width: 768px) {
            .search-responsiveness {
                display: none;
            }
        }

        .blackColor {
            color: black;
        }        
        .redcolor {
            color: red;
        }
        #notificationsBody {
            max-height: 450px !important;
            max-width: initial;
            width: 385px;
        }
        #notifiCountStyling {
            right: 4px;
            position: relative;
            top: -8px;
        }
    </style>
    <!-- Bootstrap core JavaScript -->
    <script src="~/frontAssets/vendor/jquery/jquery.min.js"></script>
    <script src="~/frontAssets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Contact form JavaScript -->
    <!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
    <script src="~/frontAssets/js/jqBootstrapValidation.js"></script>
    <script src="~/frontAssets/js/contact_me.js"></script>
    <!-- Slick -->
    <script src="~/frontAssets/vendor/slick-master/slick/slick.js" type="text/javascript" charset="utf-8"></script>
    <!-- lightgallery -->
    <script src="~/frontAssets/vendor/lightgallery-master/dist/js/lightgallery-all.min.js"></script>
    <!-- select2 Js -->
    <script src="~/frontAssets/vendor/select2/js/select2.min.js"></script>
    <!-- Custom -->
    <script src="~/frontAssets/js/countrypicker.js"></script>
    <script src="~/frontAssets/js/tagsinput.js"></script>
    <script src="~/frontAssets/js/custom.js"></script>
    <script src="~/sweetalert/wnoty.js"></script>
    <script src="~/FrontAssets/customJS/systemNotifications.js"></script>
    <script src="~/frontAssets/customJS/index.js"></script>

    
</head>
<body>
    <input type="hidden" id="getColor" value="@ViewBag.Color" />
    <input type="hidden" id="getMessage" value="@ViewBag.Message" />
    <!-- Modal -->
    <div class="modal fade" id="deleteModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeModal()">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="staticBackdropDeleteFunctionType" />
                    <input type="hidden" id="staticBackdropDeleteId" />
                    Attention: Deleting the record erases all data associated with it. Double-check before confirming. 💾
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeModal()">Close</button>
                    <button type="button" class="btn btn-danger" onclick="deleteFunction()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Availability Modal -->
    <div class="modal fade" id="AvailabilityModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Set/Update Availability</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeAvailabilityModal()">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive" id="addWeeklyAvailability" style="display:block">
                        <table class="table table-stripped text-center">
                            <thead>
                                <tr>
                                    <th>Days</th>
                                    <th>Morning<br>(7am-12pm)</th>
                                    <th>Afternoon<br>(12pm-5pm)</th>
                                    <th>Evening<br>(5pm-10pm)</th>
                                    <th>Night<br>(12am-7am)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5">
                                        You must first finish your profile in order to enter your availability.
                                        Your availability will be immediately added as you finish your profile, which you can
                                        edit whenever it's convenient for you.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="checkAvailabilityLoader" class="text-center" style="display:none">
                        <img src="~/frontassets/vendor/slick-master/slick/ajax-loader.gif" style="width:100px; height:100px" />
                    </div>
                    <div class="table-responsive" id="checkWeeklyAvailability" style="display:none">
                        <table class="table table-stripped text-center">
                            <thead>
                                <tr>
                                    <th>Days</th>
                                    <th>Morning<br>(7am-12pm)</th>
                                    <th>Afternoon<br>(12pm-5pm)</th>
                                    <th>Evening<br>(5pm-10pm)</th>
                                    <th>Night<br>(12am-7am)</th>
                                </tr>
                            </thead>
                            <tbody id="availabilityBody"></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeAvailabilityModal()">Close</button>
                    @* <button type="button" class="btn btn-success" id="addAvailabilityBtn" onclick="addAvailability()">Set Availability</button> *@
                </div>
            </div>
        </div>
    </div>
 
    <audio id="notificationSound" preload="auto">
        <source src="~/FrontAssets/when-604.mp3" type="audio/mpeg">
    </audio>

    
    <nav class="navbar navbar-expand-lg navbar-light topbar static-top shadow-sm bg-white osahan-nav-top px-0">
        <div class="container">
            <!-- Sidebar Toggle (Topbar) -->
            @if (User.Identity.IsAuthenticated)
            {
                var IsCompleteValetAccount = @User.Claims.First(x => x.Type == "IsCompleteValetAccount").Value;
                if (IsCompleteValetAccount == "1")
                {
                    <a class="navbar-brand" href="@Url.Action("Welcome","Home")"><img src="~/frontAssets/images/CustomImages/butlerlogo.png" alt=""></a>
                }
                else
                {
                    <a class="navbar-brand" href="#"><img src="~/frontAssets/images/CustomImages/butlerlogo.png" alt=""></a>
                }
            }
            else
            {
                <a class="navbar-brand" href="@Url.Action("Welcome","Home")"><img src="~/frontAssets/images/CustomImages/butlerlogo.png" alt=""></a>
            }
        @if (User.Identity.IsAuthenticated)
        {
            var loggedInUserRoleClaim = @User.Claims.First(x => x.Type == ClaimTypes.Role);
            if (loggedInUserRoleClaim.Value != "Valet")
            {
                <!-- Topbar Search -->
                <form class="d-none d-sm-inline-block form-inline mr-auto my-2 my-md-0 mw-100 navbar-search" action="@Url.Action("Search", "Home")">
                    <div class="input-group">
                        <input type="text" name="searchKeyword" class="form-control bg-white small" placeholder="Find Services..." aria-label="Search" aria-describedby="basic-addon2" required>
                        <div class="input-group-append">
                            <button class="btn btn-success" type="submit">
                                <i class="fa fa-search fa-sm"></i>
                            </button>
                        </div>
                    </div>
                </form>
            }
        }
            <!-- Topbar Navbar -->
            <ul class="navbar-nav align-items-center ml-auto">
                <li class="nav-item dropdown no-arrow no-caret mr-3 dropdown-notifications d-sm-none">
                    <a class="btn btn-icon btn-transparent-dark dropdown-toggle" href="#" id="searchDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-search fa-fw"></i>
                    </a>
                    <!-- Dropdown - Messages -->
                    <div class="dropdown-menu dropdown-menu-right p-3 shadow-sm animated--grow-in" aria-labelledby="searchDropdown">
                        <form class="form-inline mr-auto w-100 navbar-search">
                            <div class="input-group">
                                <input type="text" class="form-control bg-light border-0 small" placeholder="Find Services..." aria-label="Search" aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button">
                                        <i class="fa fa-search fa-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>
                @if (User.Identity.IsAuthenticated)
                {
                var loggedInUserRoleClaim = @User.Claims.First(x => x.Type == ClaimTypes.Role);

                var loggedInUserRole = "";
                if (loggedInUserRoleClaim != null)
                {
                    loggedInUserRole = loggedInUserRoleClaim.Value;
                }
                var loggedInUserStatus = @User.Claims.First(x => x.Type == "IsActive").Value;
                    var IsCompleteValetAccount = @User.Claims.First(x => x.Type == "IsCompleteValetAccount").Value;
                    if (loggedInUserStatus == "Active" && IsCompleteValetAccount == "1")
                    {
                        <li id="notificationList" class="nav-item dropdown no-arrow no-caret mr-3 dropdown-notifications">
                        
                            <a class="btn btn-icon btn-transparent-dark dropdown-toggle "
                                href="javascript:void(0);"
                                role="button" data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                                onclick="getNotifications()">
                                <i class="fa fa-bell fa-lg "></i>
                                <span id="notifiCount"
                                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" 
                                    style="margin-left: 15px;margin-bottom:15px;color:white; display:none">
                                    <i class="fa fa-circle-notch fa-spin text-primary"></i>
                                </span>
                            </a>

                            <div id="notificationsBody" style=" display:none;" class="dropdown-menu dropdown-menu-right border-0 shadow animated--fade-in-up" aria-labelledby="navbarDropdownAlerts">
                                <div b-n5xx7nq1xe="" style="border-bottom: 1px solid #e3e6ec; padding-top: 0.5rem!important; padding-bottom: 0.5rem!important;" class="dropdown-header d-flex align-items-center py-3">
                                    <h5 b-n5xx7nq1xe="" class="text-body mb-0 me-auto">Notifications </h5>
                                    <button b-n5xx7nq1xe="" onclick="CloseNotifications()" id="closeNotificationsButton" class="ml-auto dropdown-notifications-all text-body btn btn-default" data-bs-toggle="tooltip" data-bs-placement="top" title="Close Notifications" fdprocessedid="lm797p">
                                        <i b-n5xx7nq1xe="" class="text-danger fa fa-times fa-lg"></i>
                                    </button>
                                </div>
                            </div>
                        </li>
                        <li id="ManageOrdersIcon" class="nav-item dropdown no-arrow no-caret mr-3 dropdown-notifications">
                            <a class="btn btn-icon btn-transparent-dark dropdown-toggle" href="@Url.Action("ManageOrders","User")" title="Manage Orders">
                                <i class="mt-1 fa fa-solid fa-list"></i>
                            </a>
                        </li>
                    @if (loggedInUserRole == "Customer" || loggedInUserRole == "Valet")
                        {
                            <li id="ManageMessagesIcon" class="nav-item dropdown no-arrow no-caret mr-3 dropdown-notifications">
                                <a class="btn btn-icon btn-transparent-dark dropdown-toggle" id="navbarDropdownMessages" href="@Url.Action("Messages","Home")" role="button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    <span id="messageNotification" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="margin-left: 15px;margin-bottom:15px;color:white; display:none"></span>
                                </a>
                            </li>    
                        }
                    }
                    <li class="nav-item dropdown no-arrow no-caret dropdown-user mr-3">
                        <a class="btn btn-icon btn-transparent-dark dropdown-toggle" id="navbarDropdownUserImage" href="javascript:void(0);" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @{
                                var getProfileImage = @User.Claims.First(x => x.Type == "ProfileImage").Value;
                                if (getProfileImage != null && getProfileImage != "")
                                {
                                    <img class="img-fluid" src="@getProfileImage">
                                }
                                else
                                {
                                    <img class="img-fluid" src="~/frontAssets/images/user/s4.png">
                                }
                            }
                        </a>
                        <div class="dropdown-menu dropdown-menu-right border-0 shadow animated--fade-in-up" aria-labelledby="navbarDropdownUserImage">
                            <h6 class="dropdown-header d-flex align-items-center">
                                @{
                                    if (getProfileImage != null && getProfileImage != "")
                                    {
                                        <img class="dropdown-user-img" src="@getProfileImage">
                                    }
                                    else
                                    {
                                        <img class="dropdown-user-img" src="~/frontAssets/images/user/s4.png">
                                    }
                                }

                                <div class="dropdown-user-details">
                                    <div class="dropdown-user-details-name">@User.Claims.First(x => x.Type == "UserName").Value</div>
                                    <div class="dropdown-user-details-email">
                                        @User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Email)?.Value
                                    </div>
                                </div>
                            </h6>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="@Url.Action("Account", "User")">
                                <div class="dropdown-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings">
                                        <circle cx="12" cy="12" r="3"></circle>
                                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                    </svg>
                                </div>
                                Account
                            </a>
                            <a class="dropdown-item" href="@Url.Action("UpdateUserPassword", "Auth")">
                                <div class="dropdown-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings">
                                        <circle cx="12" cy="12" r="3"></circle>
                                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                    </svg>
                                </div>
                                Update Password
                            </a>
                            <a class="dropdown-item" href="@Url.Action("Logout","User")">
                                <div class="dropdown-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out">
                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                        <polyline points="16 17 21 12 16 7"></polyline>
                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                    </svg>
                                </div>
                                Log Out
                            </a>
                        </div>
                    </li>
                    <li class="nav-item dropdown no-arrow no-caret dropdown-user mr-3">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </li>
                }
            </ul>
        </div>
    </nav>
        
    <nav class="navbar navbar-expand-lg navbar-light bg-white osahan-nav-mid px-0 border-top shadow-sm">
        <div class="container">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span id="navbarToggler" class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        @if (User.Identity.IsAuthenticated)
                        {
                            var IsCompleteValetAccount = @User.Claims.First(x => x.Type == "IsCompleteValetAccount").Value;
                            if (IsCompleteValetAccount == "1")
                            {
                                <a class="nav-link" href="@Url.Action("Index", "Home")" id="navbarDropdownPortfolio" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-home mr-1" aria-hidden="true"></i><span class="blackColor semibold">Home</span>
                                </a>
                            }
                        }
                        else
                        {
                            <a class="nav-link" href="@Url.Action("Index", "Home")" id="navbarDropdownPortfolio" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-home mr-1" aria-hidden="true"></i><span class="blackColor semibold">Home</span>
                            </a>
                        }
                    </li>
                    <li class="nav-item dropdown" style="visibility:hidden;">
                    <li class="nav-item dropdown" style="visibility:hidden;">
                    <li class="nav-item dropdown" style="visibility:hidden;">
                </ul>
            @if (User.Identity.IsAuthenticated)
            {
                var loggedInUserStatus = @User.Claims.First(x => x.Type == "IsActive").Value;
                var IsCompleteValetAccount = @User.Claims.First(x => x.Type == "IsCompleteValetAccount").Value;
                if (IsCompleteValetAccount == "0")
                {
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item my-auto">
                            <a class="nav-link" href="#">
                                <span class="redcolor semibold">(Pause use of other features. Complete your Account Information) </span>
                            </a>
                        </li>
                    </ul>
                }
                else if (loggedInUserStatus != "Active")
                {
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item my-auto">
                            <a class="nav-link" href="#">
                                @if (loggedInUserStatus == "AdminVerificationPending")
                                {
                                    <span class="redcolor semibold">(Pause use of other features while Account Admin Verification is pending) </span>
                                }
                                else if (loggedInUserStatus == "EmailVerificationPending")
                                {
                                    <span class="redcolor semibold">(Pause use of other features while Account email Verification is pending) </span>
                                }
                                else if (loggedInUserStatus == "AccountOnHold")
                                {
                                    <span class="redcolor semibold">(Pause use of other features while Account is on hold) </span>
                                }
                            </a>
                        </li>

                    </ul>
                }
            }
            <ul class="navbar-nav ml-auto">
                @if (!User.Identity.IsAuthenticated)
                {
                        <li class="nav-item  my-auto">
                            <a class="nav-link" href="@Url.Action("UserLogin","Auth")">
                                <i class="fa fa-fw fa-user"></i>
                                <span class="blackColor semibold">Sign In</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/Auth/Register?value=Customer">
                                <button class="btn btn-outline-secondary blackColor semibold">Join</button>
                            </a>
                        </li>
                }
                else
                {
                    var loggedInUserRole = @User.Claims.First(x => x.Type == ClaimTypes.Role).Value;
                    var loggedInUserStatus = @User.Claims.First(x => x.Type == "IsActive").Value;
                    var IsCompleteValetAccount = @User.Claims.First(x => x.Type == "IsCompleteValetAccount").Value;
                    if (loggedInUserStatus == "Active")
                    {
                        if (loggedInUserRole == "Admin")
                        {
                            <li class="nav-item my-auto">
                                <a class="nav-link" href="@Url.Action("Index","Admin")">
                                    <span class="blackColor semibold">Dashboard</span>
                                </a>
                            </li>
                        }
                        if (loggedInUserRole == "Customer")
                        {
                            <li class="nav-item my-auto">
                                <a class="nav-link" href="@Url.Action("RequestService","User")">
                                    <i class="fa fa-fw fa-tasks"></i>
                                    <span class="blackColor semibold">Request A Service</span>
                                </a>
                            </li>
                            @* <li class="nav-item my-auto">
                                <a class="nav-link" href="@Url.Action("SystemPackages", "Home")">
                                    <i class="fa fa-fw fa-shopping-cart"></i>
                                    <span class="blackColor semibold">Buy Packages</span>
                                </a>
                            </li>
                            <li class="nav-item my-auto">
                                <a class="nav-link" href="@Url.Action("PackageDetails", "User")">
                                    <i class="fa fa-eye"></i>
                                    <span class="blackColor semibold">View Packages</span>
                                </a>
                            </li>*@

                            <li class="nav-item my-auto">
                                <div class="dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="systemPackagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-cog mr-2"></i> <!-- Added icon and spacing -->
                                        <span class="blackColor semibold">Packages</span>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="systemPackagesDropdown">
                                        <a class="dropdown-item" href="@Url.Action("SystemPackages", "Home")">
                                            <i class="fa fa-shopping-cart mr-2"></i> <!-- Added icon and spacing -->
                                            Buy Packages
                                        </a>
                                        <a class="dropdown-item" href="@Url.Action("PackageDetails", "User")">
                                            <i class="fa fa-eye mr-2"></i> <!-- Added icon and spacing -->
                                            View Packages
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item my-auto">
                                <a class="nav-link" href="@Url.Action("ScheduledTask", "Home")">
                                    <i class="fa fa-fw fa-calendar"></i> <!-- Replaced icon with "fa-calendar" -->
                                    <span class="blackColor semibold">Scheduled Appointments</span>
                                </a>
                            </li>

                        }
                        if (IsCompleteValetAccount != "0")
                        {
                            if(loggedInUserRole == "Customer" || loggedInUserRole == "Valet")
                            {
                                <li id="ManageAppointments" class="nav-item my-auto">
                                    <a class="nav-link" href="@Url.Action("ManageAppointments", "User")">
                                        <i class="fa fa-fw fa-envelope"></i>
                                        <span class="blackColor semibold">Manage Appointments</span>
                                    </a>
                                </li>
                            }
                                
                        }
                        if (loggedInUserRole == "Customer")
                        {
                            <li class="nav-item my-auto">
                                <a href="@Url.Action("Register","Auth",new{value= "ITValet"})" class="nav-link">
                                    <i class="fa fa-fw fa-trophy"></i>
                                    <span class="blackColor semibold">Become IT Valet</span>
                                </a>
                            </li>
                        }
                        else
                        {
                            if (IsCompleteValetAccount != "0")
                            {
                                if(loggedInUserRole == "Valet")
                                {
                                    <li id="ManageEarnings" class="nav-item my-auto">
                                        <a class="nav-link" href="@Url.Action("Earnings", "User")">
                                            <i class="fa fa-money"></i>
                                            <span class="blackColor semibold">Manage Earnings</span>
                                        </a>
                                    </li>
                                }                                   
                                <li id="PreviewProfile" class="nav-item my-auto">
                                    <a class="nav-link" href="@Url.Action("Account","User")">
                                        <i class="fa fa-fw fa-thin fa-eye"></i>
                                        <span class="blackColor semibold">Preview Your Profile</span>
                                    </a>
                                </li>
                                <li class="nav-item my-auto">
                                    <a class="nav-link" href="@Url.Action("ScheduledTask", "Home")">
                                        <i class="fa fa-fw fa-calendar"></i> <!-- Replaced icon with "fa-calendar" -->
                                        <span class="blackColor semibold">Scheduled Appointments</span>
                                    </a>
                                </li>
                            }
                        }
                        @if (loggedInUserRole == "Customer" || loggedInUserRole == "Valet")
                        {
                            <li class="nav-item my-auto">
                                <button class="btn btn-outline-secondary my-2 blackColor semibold" onclick="copyToClipboard()" type="button">
                                    Share Your Referral
                                </button>
                            </li>
                        }
                    }
                    }
                </ul>
            </div>
        </div>
    </nav>

    @RenderBody()

    <footer class="bg-white">
        <div class="container">
            <div class="d-flex justify-content-between">
                <div class="footer-list">
                    <h2>Categories</h2>
                    <ul class="list">
                        <li><a href="#">Graphics &amp; Design</a></li>
                        <li><a href="#">Digital Marketing</a></li>
                        <li><a href="#">Writing &amp; Translation</a></li>
                        <li><a href="#">Video &amp; Animation</a></li>
                        <li><a href="#">Music &amp; Audio</a></li>
                        <li><a href="#">Programming &amp; Tech</a></li>
                        <li><a href="#">Sitemap</a></li>
                    </ul>
                </div>
                <div class="footer-list">
                    <h2>About</h2>
                    <ul class="list">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Help &amp; Support</a></li>
                    </ul>
                </div>
                <div class="footer-list">
                    <h2>Community</h2>
                    <ul class="list">
                             <li><a href="@Url.Action("Register","Auth",new{value= "ITValet"})" >Become an IT Valet</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <div class="logo">
                    <a href="@Url.Action("Welcome","Home")">
                        <img src="~/frontAssets/images/CustomImages/IT-LOGO-WEB.png">
                    </a>
                </div>
                <p>
                    © Copyright 2023 IT Valet. All Rights Reserved
                </p>
            </div>
        </div>
    </footer>
    
    <script>
        setInterval(myFunction, 1000);

        var projectBaseUrl = "@ProjectVariables.BaseUrl";
        var systemUrl = "@ProjectVariables.SystemUrl";
        var getMessage = $("#getMessage").val();
        var getColor = $("#getColor").val();
        var userNameForRefferedBy = "";
        var loggedInUserId = "";
        var Token = "";
    </script>

    <script>
        $(document).ready(function () {
            $(window).resize(function () {
                if ($(window).width() < 993) 
                {
                    $("#navbarToggler").removeClass("navbar-toggler-icon");
                    var divElement = $("#navbarResponsive");
                    divElement.css("margin-top", "-57px");
                } 
                else 
                {
                    $("#navbarToggler").addClass("navbar-toggler-icon");
                    var divElement = $("#navbarResponsive");
                    divElement.css("margin-top", "0px");
                }
            });
        });
    </script>

    @if (User.Identity.IsAuthenticated)
    {
        <script src="~/js/signalr/dist/browser/signalr.js"></script>
        <!-- SignlR-->
        <script>
            Token = "@User.Claims.First(x => x.Type == "Token").Value";
            loggedInUserId = @User.Claims.First(x => x.Type == ClaimTypes.NameIdentifier).Value;
            "use strict";
            var signalURL = "@ProjectVariables.SignalR_Url";
            var connection = new signalR.HubConnectionBuilder().withUrl(signalURL).build();
            connection.on("LogOutDeletedUser", function (ReceiverId) {
                if (loggedInUserId == ReceiverId) {
                    alert("Someone Has Deleted You From the System. Hit Okay to Proceed");
                    window.location.href = "../User/LogOut";
                }
            });
            connection.on("ReloadNotifications", function (ReceiverId) {
                if (loggedInUserId == ReceiverId) {
                    getNotificationCount();
                    NotificationSound();
                }
            });
            connection.start().then(function () {
                var sendMessageButton = document.getElementById("sendMessageButton");
                if (sendMessageButton) {
                    sendMessageButton.disabled = false;
                }
            }).catch(function (err) {
                return console.error(err.toString());
            });
        </script>

        <script>
            getNotificationCount();

            userNameForRefferedBy = "@User.Claims.First(x => x.Type == "UserName").Value";
            function copyToClipboard() {
                var textToCopy = systemUrl + "?refferedBy=" + userNameForRefferedBy;
                var tempInput = $("<input>");
                $("body").append(tempInput);
                tempInput.val(textToCopy);
                tempInput.select();
                document.execCommand("copy");
                tempInput.remove();
                triggerSweetAlert("Copied to clipboard", "@ProjectVariables.SuccessColor");
            }

            function closeAvailabilityModal() {
                $("#availabilityBody").empty().append();
                $("#AvailabilityModal").modal("hide");
            }
        </script>
    }

    <script src="~/frontAssets/customJS/userValidations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.0.3/index.global.min.js"></script>
    @RenderSection("CustomJs", false)

</body>
</html>
